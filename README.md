# Hawk

[![Deploy with Vercel](https://vercel.com/button)](https://vercel.com/new/clone?repository-url=https://github.com/macintushar/hawk)

Hawk is an open-source, self-hosted monitoring dashboard built with Next.js, TypeScript, tRPC, and Drizzle ORM. It helps you track the uptime and performance of your websites and services, send notifications on status changes, and publish customizable status pages.

## Table of Contents

1. [Features](#features)
2. [Tech Stack](#tech-stack)
3. [Getting Started](#getting-started)
   - [Prerequisites](#prerequisites)
   - [Installation](#installation)
   - [Environment Variables](#environment-variables)
   - [Database Setup & Migrations](#database-setup--migrations)
   - [Running the App](#running-the-app)
4. [Usage](#usage)
   - [Monitors](#monitors)
   - [Status Pages](#status-pages)
   - [Notifications](#notifications)
5. [Project Structure](#project-structure)
6. [Scripts](#scripts)
7. [Contributing](#contributing)
8. [License](#license)

## Features

- ✅ Define and manage **Monitors** with custom CRON intervals
- 📉 Automatic status checks and **Incident** creation when thresholds are exceeded
- 🚨 Real-time **Notifications** via Slack or Email on status changes
- 🌐 Publish **Status Pages** with live charts for public visibility
- 🔒 User **Authentication** with secure sign-up and sign-in flows
- 🧩 Intuitive **Dashboard** with recent activity, quick actions, and overview cards

## Tech Stack

- Framework: Next.js (App Router)
- Language: TypeScript
- API Layer: tRPC
- Database & ORM: SQLite + Drizzle ORM
- Styling: Tailwind CSS + Radix UI
- State Management & Data Fetching: React Query
- Charts: Recharts
- Auth: Better-Auth & custom middleware

## Getting Started

### Prerequisites

- [Bun](https://bun.sh)

### Installation

```bash
# Clone the repo
git clone https://github.com/macintushar/hawk.git
cd hawk

# Install dependencies
bun install
```

### Environment Variables

Create a `.env.local` file in the project root with the following variables:

```dotenv
DATABASE_URL="libsql://<your-database-url>" # generated by turso
DATABASE_TOKEN="<random-token>" # generated by turso
BETTER_AUTH_SECRET="<secure-secret>"
BASE_URL="http://localhost:3000"
NODE_ENV="development"
```

> _Note: All server variables are validated at build time via `@t3-oss/env-nextjs`._

### Database Setup & Migrations

Generate the Drizzle schema and apply migrations:

```bash
# Generate migration SQL files (if schema changed)
bun db:generate

# Apply pending migrations
bun db:migrate

# (Optional) Push schema without generating migration files
bun db:push

# Launch Drizzle Studio UI
bun db:studio
```

### Running the App

```bash
# Development mode
bun run dev

# Build for production
bun run build

bun run start
```

The app will be available at `http://localhost:3000`.

## Usage

### Monitors

- Create new monitors by specifying a name, URL, CRON schedule, and failure threshold.
- Hawk will periodically check each monitor’s endpoint and log status.
- Incidents are auto-generated when consecutive failures exceed the threshold.

### Status Pages

- Group one or more monitors into public status pages.
- Each status page comes with live uptime charts and incident history.
- Customize page name, description, and monitor selection.

### Notifications

- Configure Slack or Email integrations.
- Receive alerts when services go down or recover.

## Project Structure

```text
/ (root)
├─ src/
│  ├─ app/       # Next.js App Router pages & layouts
│  ├─ components/ # Reusable UI components
│  ├─ lib/       # Shared utilities (auth, monitoring service, date-utils)
│  ├─ server/    # tRPC routers & DB schema
│  ├─ styles/    # Global CSS
│  ├─ trpc/      # tRPC client & hooks
│  └─ types.ts   # Common TypeScript types
├─ drizzle/     # Drizzle migration files & snapshots
├─ public/      # Static assets
├─ db.sqlite    # SQLite database file
└─ README.md    # This file
```

## Scripts

| Command                | Description                      |
| ---------------------- | -------------------------------- |
| `bun run dev`          | Start dev server (Next.js)       |
| `bun run build`        | Build for production             |
| `bun run start`        | Start production server          |
| `bun run lint`         | Run ESLint                       |
| `bun run lint:fix`     | Fix ESLint issues                |
| `bun run format:check` | Check Prettier formatting        |
| `bun run format:write` | Apply Prettier formatting        |
| `bun run db:generate`  | Generate Drizzle migration files |
| `bun run db:migrate`   | Apply Drizzle migrations         |
| `bun run db:studio`    | Launch Drizzle Studio UI         |

## Contributing

Contributions are welcome! Please fork the repo and submit a pull request.

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/my-feature`)
3. Commit your changes (`git commit -m "feat: description"`)
4. Push to your branch (`git push origin feature/my-feature`)
5. Open a Pull Request

Please ensure your changes follow existing code styles and pass linting.

## License

MIT © [Tushar Selvakumar](https://github.com/macintushar)
